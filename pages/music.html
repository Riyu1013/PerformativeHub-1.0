<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0"> 
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="../styles.css">
    <title>Music Page</title>
</head>
<body>

    <nav class="navbar navbar-expand-lg bg-body" id="my-nav">
        <div class="container-fluid">
            <div class="brand-wrapper">
                <a class="navbar-brand" id="hero-text.shrink" href="index.html">Performative <br> Website</a>
            </div>
            <div class="nav-item" id="nav-item">
                <a class="justify-content-end fs-5" href="about.html">About, </a>
                <a class="justify-content-end fs-5" href="contact.html">Contact, </a>
                <a class="justify-content-end fs-5" href="" data-bs-toggle="offcanvas" data-bs-target="#offcanvasRight" aria-controls="offcanvasRight">Cart</a>
            </div>
        </div>
    </nav>
    <div class="offcanvas offcanvas-end" tabindex="-1" id="offcanvasRight" aria-labelledby="offcanvasRightLabel">
        <div class="offcanvas-header">
        <h5 class="offcanvas-title" id="offcanvasRightLabel">Cart</h5>
        <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
        </div>
        <div class="offcanvas-body" id="cart-items">

        </div>
    </div>
    
    <div class="music-body">
        <div id="song-list">
            <table class="table table-hover caption-top">
                <caption>Songs</caption>
                <thead>
                    <tr> <td> Title</td> <td> Artist</td></tr>
                </thead>
                <tbody id="song-info">
                    <tr data-album-cover="../media/clairo.png" data-audio-src="../media/clairo-bags.mp3"><td>Bags</td><td>Clairo</td></tr>
                    <tr data-album-cover="../media/clairo.png" data-audio-src="../media/clairo-sofia.mp3"><td>Sofia</td><td>Clairo</td></tr>
                    <tr data-album-cover="../media/niki.png" data-audio-src="../media/niki-the apartment we wont share.mp3"><td>The Apartment We Won't Share</td><td>Niki</td></tr>
                    <tr data-album-cover="../media/mitski.jpg" data-audio-src="../media/mitski-i bet on losing dogs.mp3"><td>I Bet On Losing Dogs</td><td>Mitski</td></tr>
                    <tr data-album-cover="../media/phoebe bridgers.jpg" data-audio-src="../media/phoebe bridgers-waiting room.mp3"><td>Waiting Room</td><td>Phoebe Bridgers</td></tr>
                    <tr data-album-cover="../media/olivia dean.jpg" data-audio-src="../media/olivia dean-dive.mp3"><td>Dive</td><td>Olivia Dean</td></tr>
                </tbody>
            </table>
        </div>

        <div id="vinyl-container">
            <img src="../media/black-vinyl-record-with-red-label-illustration-png.png" alt="Vinyl Record" id="vinyl-record">
        </div>

        </div>

    <audio id="audio-player" style="display: none;"></audio>
    <!-- <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script> -->
    <footer id="footer">
    <div class="footer-brand">
        <h1>DON'T MISS NEW ITEMS</h1>

        <form class="w-100 m-0">
        <div class="row g-3">
            <div class="col-md-10">
            <input type="email" class="form-control" id="exampleInputEmail1" aria-describedby="emailHelp" placeholder="Enter your email">
            </div>
            <div class="col-md-2">
            <button type="submit" class="btn btn-primary">Go</button>
            </div>
        </div>
        </form>
    </div>
    <div class="footer-nav">
        <div class="footer-info">
        <h4>You Can Find Us</h4>
        <p>performative@gmail.com</p>
        <p>+12 345 6789</p>
        <p>Governor Pack Road, Baguio City, 2600, Benguet, Philippines</p>
        </div>
        <div class="footer-faq">
        <h4>We Will Always Help</h4>
        <p>Terms and Conditions</p>
        <p>Privacy Policy</p>
        <p>Cookies</p>
        <p>Shipping & Returns</p>
        </div>
    </div>
    </footer>
    <div class="cursor" id="cursor">
        <svg width="60" height="60">
        <circle cx="30" cy="30" r="20" stroke="black" stroke-width="1" fill="white"></circle>
        </svg>
    </div>   
    <script>


        document.addEventListener('DOMContentLoaded', () => {
            const songTableBody = document.getElementById('song-info');
            const vinylContainer = document.getElementById('vinyl-container');
            const audioPlayer = document.getElementById('audio-player');
            const body = document.body; // Reference to the body 

            function displayAlbumCover(imageUrl) {
                let cover = document.getElementById('album-cover-img');

                if (!cover) {
                    // Create the element if it doesn't exist
                    cover = document.createElement('img');
                    cover.id = 'album-cover-img';
                    // The album-cover class has the necessary positioning and sizing
                    cover.classList.add('album-cover');
                    vinylContainer.appendChild(cover);
                }
                
                // Set the new image source
                cover.src = imageUrl;
            }

            songTableBody.addEventListener("click", (e) => {
                const clickedRow = e.target.closest('tr');
                
                if (clickedRow) {
                    const albumCover = clickedRow.dataset.albumCover; 
                    const audioSrc = clickedRow.dataset.audioSrc;     


                    // 2. Stop current playback and reset state
                    audioPlayer.pause();
                    audioPlayer.currentTime = 0;
                    body.classList.remove('is-playing'); // Remove spinning/visible class

                    // 3. Execution Sequence 
                    
                    // Put the album cover on top of the vinyl
                    displayAlbumCover(albumCover);
                    
                    // Start the song playing
                    audioPlayer.src = audioSrc;
                    
                    setTimeout(() => {
                        vinylContainer.classList.add('is-playing'); // This starts the CSS animation and fades in the cover
                        
                        audioPlayer.play()
                            .then(() => {
                                console.log(`Now playing: ${clickedRow.firstElementChild.textContent}`);
                            })
                            .catch(error => {
                                console.error("Audio playback failed. NOTE: HTML <audio> cannot play YouTube links. Use direct audio files (.mp3, .wav).", error);
                            });
                    }, 100); 
                }
            });
        });
</script>
<!-- Global JS -->
<script defer src="../script/main.js"></script>
</body>
</html>